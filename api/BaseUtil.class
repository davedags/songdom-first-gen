<?php

class BaseUtil {
	
	public static function initDB($args = array()) {
		$db = new PDO('mysql:host=' . $_ENV['SONGDOM_DB_HOST'] . ';dbname=' . $_ENV['SONGDOM_DB'] . ';charset=utf8', $_ENV['SONGDOM_DB_USER'], $_ENV['SONGDOM_DB_PASSWORD']);
		$GLOBALS['_db'] = $db;
		return $db;
	}
	
	public static function getDB($args = array()) {
		global $app;
		if (is_object($app) && is_object($app['db'])) {
		   $GLOBALS['_db'] = $app['db'];
		   return $app['db'];  
		}
		static $db = false;
		if ($db === false) {
			$db = self::initDB($args);
		}
		return $db;
	}
}

